---
import { clsx } from 'clsx/lite'
import Container from '../elements/container.astro'
import Heading from '../elements/heading.astro'
import Text from '../elements/text.astro'
import CheckmarkIcon from '../icons/checkmark-icon.astro'

const { eyebrow, headline, subheadline, options, plans, footer, className, ...props } = Astro.props
---

<section class={clsx('py-16', className)} {...props}>
  <div>
    <Container class="flex flex-col gap-16">
      <div class="flex flex-col items-center gap-6">
        {eyebrow}
        <Heading>{headline}</Heading>
        <Text size="lg" class="flex max-w-xl flex-col gap-4 text-center">
          {subheadline}
        </Text>
        <div class="flex items-center gap-1 rounded-full bg-mist-950/5 p-1 dark:bg-white/5">
          {options.map((option, index) => (
            <button
              key={option}
              type="button"
              onclick={`document.querySelectorAll('.pricing-tab-content[' + option + ']').forEach((el) => el.style.display = 'block'); document.querySelectorAll('.pricing-tab-content').forEach((el) => el.style.display = 'none'); document.querySelector('.pricing-tab-content[' + option + ']').style.display = 'block'; document.querySelectorAll('.pricing-tab-btn').forEach((el) => el.classList.remove('bg-mist-950', 'text-white', 'dark:bg-white/10')); this.classList.add('bg-mist-950', 'text-white', 'dark:bg-white/10');`}
              class="pricing-tab-btn rounded-full px-4 py-1 text-sm/7 font-medium text-mist-950 dark:text-white {index === 0 ? 'bg-mist-950 text-white dark:bg-white/10' : ''}"
            >
              {option}
            </button>
          ))}
        </div>
      </div>
      <div>
        {options.map((option, index) => (
          <div
            key={option}
            class="pricing-tab-content grid grid-cols-1 gap-2 sm:has-[>:nth-child(5)]:grid-cols-2 sm:max-lg:has-[>:last-child:nth-child(even)]:grid-cols-2 lg:auto-cols-fr lg:grid-flow-col lg:grid-cols-none lg:has-[>:nth-child(5)]:grid-flow-row lg:has-[>:nth-child(5)]:grid-cols-3 {index !== 0 ? 'hidden' : ''}"
            data-tab={option}
          >
            <Fragment set:html={plans[option]} />
          </div>
        ))}
      </div>
      {footer}
    </Container>
  </div>
</section>